"use strict";(self.webpackChunk_lage_run_docs=self.webpackChunk_lage_run_docs||[]).push([[339],{5318:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(7378);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},f="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),f=s(r),d=o,m=f["".concat(p,".").concat(d)]||f[d]||u[d]||a;return r?n.createElement(m,i(i({ref:t},c),{},{components:r})):n.createElement(m,i({ref:t},c))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[f]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=r[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6019:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>f,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var n=r(5773),o=(r(7378),r(5318));const a={sidebar_position:6,title:"6. Profiling `lage`"},i="Profiling `lage`",l={unversionedId:"Tutorial/profile",id:"Tutorial/profile",title:"6. Profiling `lage`",description:"A particularly complex monorepo can present opporunities for optimization. For example, when there are really large packages, it might be more efficient to break those up so the build can be split across different CPU cores. lage greatly enhances the ability for developers to see where the bottlenecks are.",source:"@site/docs/Tutorial/profile.md",sourceDirName:"Tutorial",slug:"/Tutorial/profile",permalink:"/lage/docs/Tutorial/profile",draft:!1,editUrl:"https://github.com/microsoft/lage/docs/Tutorial/profile.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"6. Profiling `lage`"},sidebar:"tutorialSidebar",previous:{title:"5. Remote Cache",permalink:"/lage/docs/Tutorial/remote-cache"},next:{title:"7. Priorities",permalink:"/lage/docs/Tutorial/priority"}},p={},s=[{value:"Using the profile",id:"using-the-profile",level:2},{value:"Sample of <code>lage</code> profile session",id:"sample-of-lage-profile-session",level:2}],c={toc:s};function f(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"profiling-lage"},"Profiling ",(0,o.kt)("inlineCode",{parentName:"h1"},"lage")),(0,o.kt)("p",null,"A particularly complex monorepo can present opporunities for optimization. For example, when there are really large packages, it might be more efficient to break those up so the build can be split across different CPU cores. ",(0,o.kt)("inlineCode",{parentName:"p"},"lage")," greatly enhances the ability for developers to see where the bottlenecks are."),(0,o.kt)("p",null,"To collect a profile of the ",(0,o.kt)("inlineCode",{parentName:"p"},"lage")," run, simply run ",(0,o.kt)("inlineCode",{parentName:"p"},"lage")," with the same arguments while adding the ",(0,o.kt)("inlineCode",{parentName:"p"},"--profile")," argument."),(0,o.kt)("div",{className:"shiki-twoslash-fragment"},(0,o.kt)("pre",{parentName:"div",className:"shiki min-light",style:{backgroundColor:"#ffffff",color:"#24292eff"}},(0,o.kt)("div",{parentName:"pre",className:"code-container"},(0,o.kt)("code",{parentName:"div"},(0,o.kt)("div",{parentName:"code",className:"line"},(0,o.kt)("span",{parentName:"div",style:{color:"undefined"}},"lage build test --profile"))))),(0,o.kt)("pre",{parentName:"div",className:"shiki nord",style:{backgroundColor:"#2e3440ff",color:"#d8dee9ff"}},(0,o.kt)("div",{parentName:"pre",className:"code-container"},(0,o.kt)("code",{parentName:"div"},(0,o.kt)("div",{parentName:"code",className:"line"},(0,o.kt)("span",{parentName:"div",style:{color:"undefined"}},"lage build test --profile")))))),(0,o.kt)("h2",{id:"using-the-profile"},"Using the profile"),(0,o.kt)("p",null,"When the run is finished, a profile JSON file is produced. This file is to be imported into a Chromium-based browser's devtools Performance tab."),(0,o.kt)("h2",{id:"sample-of-lage-profile-session"},"Sample of ",(0,o.kt)("inlineCode",{parentName:"h2"},"lage")," profile session"),(0,o.kt)("p",null,"For example, you can see the following ",(0,o.kt)("inlineCode",{parentName:"p"},"lage")," run of the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.microsoft.com/en-us/fluentui/#/components"},"Fluent UI")," repo. You can see that there is a dip in the concurrency when building the ",(0,o.kt)("inlineCode",{parentName:"p"},"office-ui-fabric-react")," package. This makes sense, because many internal packages depends on that one large package."))}f.isMDXComponent=!0}}]);